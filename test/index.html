<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Painel de Testes â€” Supabase E-commerce</title>
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self'; img-src 'self' blob: data:; style-src 'self'; script-src 'self'; connect-src 'self' http://127.0.0.1:54321 https://*.supabase.co; base-uri 'none'; form-action 'self'">
    <meta name="referrer" content="no-referrer" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div id="loginScreen" class="login-screen">
      <div class="login-container">
        <h1>ğŸ” Login</h1>
        <p>FaÃ§a login para acessar o painel de testes</p>
    
        <form id="loginForm">
          <label for="loginEmail">E-mail</label>
          <input id="loginEmail" type="email" placeholder="admin@exemplo.com" autocomplete="email" required />
    
          <label for="loginPassword">Senha</label>
          <input id="loginPassword" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" required />
    
          <button id="loginBtn" type="submit">Entrar</button>
        </form>
    
        <p id="loginMessage" class="login-message" aria-live="polite"></p>
      </div>
    </div>
    
  
    <main id="mainPanel" class="container hidden">
      <div class="header-with-logout">
        <h1>ğŸ§ª Painel de Testes â€” Supabase E-commerce</h1>
        <div class="user-info">
          <span id="userEmail"></span>
          <button id="logoutBtn" type="button" class="logout-btn">Sair</button>
        </div>
      </div>
      
      <div class="actions">
        <section>
          <h2>ğŸ“¦ Exportar CSV</h2>
          <form id="exportForm" novalidate>
            <label for="customerId">ID do Cliente (UUID v4)</label>
            <input id="customerId" name="customerId" type="text" required
                   inputmode="text"
                   pattern="^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                   placeholder="ddeb27fb-d9a0-4624-be4d-4615062daed4" />
            <button id="exportCsvBtn" type="submit">Exportar CSV</button>
          </form>
        </section>
  
        <section>
          <h2>âœ‰ï¸ Enviar E-mail de ConfirmaÃ§Ã£o</h2>
          <form id="emailForm" novalidate>
            <label for="email">E-mail do Cliente</label>
            <input id="email" name="email" type="email" required placeholder="cliente@exemplo.com" />
            <label for="orderId">ID do Pedido (UUID v4)</label>
            <input id="orderId" name="orderId" type="text" required
                   pattern="^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                   placeholder="1b2f36f3-7ad4-4e83-8ff9-7ccfdcb67b76" />
            <button id="sendEmailBtn" type="submit">Enviar E-mail</button>
          </form>
        </section>
  
        <section>
          <h2>ğŸ” Consultar Pedidos do Cliente</h2>
          <form id="queryForm" novalidate>
            <label for="customerIdQuery">ID do Cliente (UUID v4)</label>
            <input id="customerIdQuery" name="customerIdQuery" type="text" required
                   pattern="^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                   placeholder="ddeb27fb-d9a0-4624-be4d-4615062daed4" />
            <button id="queryOrdersBtn" type="submit">Consultar Pedidos</button>
          </form>
        </section>
      </div>
  
      <div class="table-wrapper" aria-busy="false">
        <table id="ordersTable">
          <thead>
            <tr>
              <th>Pedido</th>
              <th>Status</th>
              <th>Total</th>
              <th>Data</th>
            </tr>
          </thead>
          
          <tbody></tbody>
        </table>
      </div>
  
      <p id="message" class="sr-only" aria-live="polite"></p>
      <footer>...</footer>
    </main>
  
    <script src="env.js" defer></script>
    <script src="script_with_auth.js" defer></script>
  </body>  
</html>